(require 'ningle)

(defvar *app* (make-instance 'ningle:<app>))

(setf (ningle:route *app* "/")
       "GO AWAY")

;; Returns the number of jellybeans belonging to a name
(defun jellybeans (name &optional number)
  number)

;; Posts jellybeans to the given name
(setf (ningle:route *app* "/jellybeans/:name" :method :POST)
      #'(lambda (params)
	  (jellybeans (getf params :name) 
		      :number
		      (clack:body-parameters 
		       ningle:*request* :number))))


(clack:clackup *app* :port 80)